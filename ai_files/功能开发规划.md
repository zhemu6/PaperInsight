# PaperInsight 功能开发规划

> **文档生成时间**: 2026-01-25
> **项目状态**: 基础功能已完成，核心 AI 功能待开发

---

## 📊 项目当前状态

### ✅ 已完成功能

1. **用户系统**
   - ✅ 用户注册（账号/邮箱两种方式）
   - ✅ 用户登录（账号/邮箱验证码）
   - ✅ 用户信息管理（头像、昵称、简介）
   - ✅ 安全设置（修改邮箱、修改密码）
   - ✅ 权限控制（@AuthCheck 注解）

2. **文件管理**
   - ✅ 无限层级文件夹系统
   - ✅ 论文上传（支持 PDF、Word、PPT 等格式）
   - ✅ 论文基本信息管理（标题、作者、关键词、摘要）
   - ✅ 文件删除和回收站功能
   - ✅ 文件搜索和筛选

3. **论文广场**
   - ✅ 公开论文展示
   - ✅ 高级搜索（标题、作者、关键词、摘要）
   - ✅ 分页展示
   - ✅ 响应式卡片布局

4. **基础设施**
   - ✅ 腾讯云 COS 对象存储集成
   - ✅ Redis 缓存和会话管理
   - ✅ RabbitMQ 消息队列（已配置，待使用）
   - ✅ 深色模式支持
   - ✅ 响应式 UI 设计

### ❌ 待开发功能

1. **核心功能缺失**
   - ❌ AI 论文分析（PaperInsightService 为空）
   - ❌ PDF 预览功能（前端已集成 pdfjs-dist，但未完整实现）
   - ❌ 论文详情页

2. **规划中功能**
   - ❌ Elasticsearch 全文检索
   - ❌ 用户偏好设置（页面显示"开发中"）

---

## 🎯 下一步功能开发规划

### 第一阶段：核心功能实现（优先级：⭐⭐⭐⭐⭐）

#### 1.1 AI 论文分析功能

**目标**: 实现基于 AgentScope 的智能论文分析系统

**功能点**:
- [ ] **PDF 文本提取**
  - 集成 PDF 解析库（如 Apache PDFBox 或 iText）
  - 提取论文全文内容
  - 处理多页文档和特殊格式

- [ ] **多智能体分析系统**
  - **摘要智能体**: 生成结构化 Markdown 摘要
    - 提取论文核心内容
    - 生成章节结构
    - 关键信息提取
  - **创新点智能体**: 识别论文创新点
    - Core Contribution 提取
    - Innovation Points 分析
    - 技术亮点总结
  - **方法论智能体**: 解析研究方法
    - 技术路线拆解
    - 实验设计分析
    - 方法论总结
  - **评分智能体**: 论文质量评分
    - 多维度评分（创新性、技术性、实用性等）
    - 综合评分（0-100）
    - 评分理由说明

- [ ] **异步处理流程**
  - 使用 RabbitMQ 处理分析任务
  - 任务状态跟踪（待分析、分析中、已完成、失败）
  - 分析进度通知（WebSocket 或轮询）

- [ ] **AgentScope 配置**
  - 配置模型（DashScope/Qwen 或其他）
  - 配置 API Key 和模型参数
  - 实现工具函数（PDF 提取、文本处理等）

**技术实现**:
```java
// 示例：PaperInsightService 实现
@Service
public class PaperInsightServiceImpl implements PaperInsightService {
    // 1. 创建分析任务
    // 2. 发送到 RabbitMQ
    // 3. 消费者处理：PDF提取 -> Agent分析 -> 结果保存
}
```

**预计工作量**: 2-3 周

---

#### 1.2 PDF 预览功能完善

**目标**: 实现完整的 PDF 在线阅读体验

**功能点**:
- [ ] **PDF 阅读器组件**
  - 页面导航（上一页/下一页/跳转）
  - 缩放控制（放大/缩小/适应宽度/适应高度）
  - 全屏阅读模式
  - 页面缩略图导航

- [ ] **性能优化**
  - 懒加载（按需加载页面）
  - 虚拟滚动（大文件优化）
  - 缓存机制

- [ ] **交互功能**
  - 文本选择和复制
  - 搜索功能（在 PDF 中搜索关键词）
  - 标注功能（高亮、笔记）

**预计工作量**: 1 周

---

#### 1.3 论文详情页

**目标**: 创建完整的论文展示页面

**功能点**:
- [ ] **基本信息展示**
  - 论文标题、作者、关键词
  - 发表日期、上传时间
  - 公开/私有状态

- [ ] **AI 分析结果展示**
  - 智能摘要（Markdown 渲染）
  - 创新点列表
  - 方法论解析
  - 评分展示（评分雷达图）

- [ ] **PDF 预览**
  - 集成 PDF 阅读器
  - 支持在线阅读

- [ ] **操作功能**
  - 编辑论文信息
  - 下载 PDF
  - 分享链接（公开论文）
  - 收藏功能

**预计工作量**: 1 周

---

### 第二阶段：用户体验增强（优先级：⭐⭐⭐⭐）

#### 2.1 用户偏好设置

**目标**: 完善用户个人设置功能

**功能点**:
- [ ] **主题设置**
  - 深色/浅色模式切换
  - 主题色自定义

- [ ] **分析偏好**
  - 分析深度选择（快速/标准/深度）
  - 模型选择（如果支持多模型）
  - 自动分析开关

- [ ] **通知设置**
  - 分析完成通知
  - 邮件通知开关

- [ ] **界面设置**
  - 列表/卡片视图切换
  - 每页显示数量

**预计工作量**: 3-5 天

---

#### 2.2 收藏和标签系统

**目标**: 增强论文管理能力

**功能点**:
- [ ] **收藏功能**
  - 收藏/取消收藏
  - 收藏夹管理
  - 收藏列表展示

- [ ] **标签系统**
  - 创建自定义标签
  - 为论文添加标签
  - 标签筛选和搜索
  - 标签颜色管理

- [ ] **数据库设计**
  ```sql
  -- 收藏表
  CREATE TABLE paper_favorite (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    paper_id BIGINT NOT NULL,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
  );

  -- 标签表
  CREATE TABLE paper_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    name VARCHAR(50) NOT NULL,
    color VARCHAR(20),
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP
  );

  -- 论文标签关联表
  CREATE TABLE paper_tag_relation (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    paper_id BIGINT NOT NULL,
    tag_id BIGINT NOT NULL
  );
  ```

**预计工作量**: 1 周

---

#### 2.3 论文推荐系统

**目标**: 基于用户行为推荐相关论文

**功能点**:
- [ ] **推荐算法**
  - 基于阅读历史的推荐
  - 基于论文相似度的推荐（关键词、作者、领域）
  - 热门论文推荐

- [ ] **推荐展示**
  - 在论文详情页显示"相关论文"
  - 在首页显示"为你推荐"
  - 推荐理由说明

**预计工作量**: 1-2 周

---

### 第三阶段：高级功能（优先级：⭐⭐⭐）

#### 3.1 Elasticsearch 全文检索

**目标**: 实现强大的全文搜索能力

**功能点**:
- [ ] **Elasticsearch 集成**
  - 安装和配置 Elasticsearch
  - 创建索引映射
  - 实现文档索引（论文全文）

- [ ] **搜索功能**
  - 全文搜索（支持中文分词）
  - 高级搜索（字段搜索、范围搜索）
  - 搜索高亮
  - 搜索建议和自动补全

- [ ] **数据同步**
  - 论文上传时自动索引
  - 定时同步任务（处理历史数据）

**预计工作量**: 1-·2 周

---

#### 3.2 协作功能

**目标**: 支持多用户协作和分享

**功能点**:
- [ ] **论文分享**
  - 生成分享链接
  - 分享链接权限控制（公开/密码保护/时效性）
  - 分享统计（访问量、下载量）

- [ ] **评论和讨论**
  - 论文评论功能
  - 评论回复
  - 评论点赞

- [ ] **协作文件夹**
  - 共享文件夹
  - 协作者管理
  - 权限控制（只读/编辑）

**预计工作量**: 2-3 周

---

#### 3.3 数据统计和分析

**目标**: 提供用户数据洞察

**功能点**:
- [ ] **个人统计**
  - 论文数量统计
  - 阅读时长统计
  - 收藏和标签统计
  - 分析结果统计

- [ ] **可视化图表**
  - 论文上传趋势
  - 领域分布（基于关键词）
  - 评分分布

**预计工作量**: 1 周

---

### 第四阶段：性能优化和监控（优先级：⭐⭐）

#### 4.1 性能优化

**目标**: 提升系统性能和用户体验

**优化点**:
- [ ] **前端优化**
  - 代码分割和懒加载
  - 图片压缩和 CDN
  - 虚拟滚动（长列表）
  - Service Worker（离线支持）

- [ ] **后端优化**
  - 数据库查询优化
  - 缓存策略优化（Redis）
  - 异步处理优化
  - 文件上传优化（分片上传）

- [ ] **PDF 处理优化**
  - PDF 预览性能优化
  - 大文件处理优化

**预计工作量**: 1-2 周

---

#### 4.2 监控和日志

**目标**: 完善系统可观测性

**功能点**:
- [ ] **日志系统**
  - 操作日志记录
  - 错误日志收集
  - 日志查询和分析

- [ ] **监控系统**
  - 集成 OpenTelemetry（AgentScope 支持）
  - 性能监控
  - 错误监控和告警

- [ ] **数据分析**
  - 用户行为分析
  - 系统使用统计

**预计工作量**: 1 周

---

## 📅 开发时间线建议

### 短期目标（1-2 个月）

1. **第 1-3 周**: AI 论文分析功能
2. **第 4 周**: PDF 预览功能完善
3. **第 5 周**: 论文详情页
4. **第 6 周**: 用户偏好设置

### 中期目标（3-4 个月）

5. **第 7-8 周**: 收藏和标签系统
6. **第 9-10 周**: 论文推荐系统
7. **第 11-12 周**: Elasticsearch 全文检索

### 长期目标（5-6 个月）

8. **第 13-15 周**: 协作功能
9. **第 16 周**: 数据统计和分析
10. **第 17-18 周**: 性能优化和监控

---

## 🛠️ 技术栈补充

### 需要引入的新技术

1. **PDF 处理**
   - 后端: Apache PDFBox 或 iText
   - 前端: pdfjs-dist（已集成，需完善）

2. **全文检索**
   - Elasticsearch 8.x
   - Spring Data Elasticsearch

3. **实时通信**
   - WebSocket（分析进度通知）
   - 或 Server-Sent Events (SSE)

4. **图表可视化**
   - ECharts 或 Chart.js
   - 用于评分雷达图、统计图表

5. **Markdown 渲染**
   - marked 或 markdown-it
   - 用于 AI 摘要展示

---

## 📝 数据库扩展

### 需要新增的表

1. **paper_favorite** - 收藏表
2. **paper_tag** - 标签表
3. **paper_tag_relation** - 论文标签关联表
4. **paper_comment** - 评论表
5. **paper_share** - 分享链接表
6. **user_preference** - 用户偏好设置表
7. **analysis_task** - 分析任务表（用于跟踪分析状态）

---

## 🎨 UI/UX 改进建议

1. **加载状态优化**
   - 骨架屏（Skeleton Screen）
   - 分析进度条
   - 优雅的加载动画

2. **交互优化**
   - 拖拽上传
   - 批量操作
   - 快捷键支持

3. **响应式优化**
   - 移动端适配
   - 平板端优化

---

## 🔒 安全性考虑

1. **文件安全**
   - 文件类型验证
   - 文件大小限制
   - 病毒扫描（可选）

2. **API 安全**
   - 接口限流
   - 防刷机制
   - 敏感信息脱敏

3. **数据安全**
   - 数据加密存储
   - 备份机制

---

## 📚 文档和测试

1. **API 文档**
   - 完善 Knife4j 接口文档
   - 添加使用示例

2. **用户文档**
   - 使用手册
   - 功能说明

3. **测试**
   - 单元测试
   - 集成测试
   - E2E 测试

---

## 💡 创新功能建议

1. **AI 对话功能**
   - 基于论文内容的智能问答
   - 论文对比分析

2. **知识图谱**
   - 论文关系可视化
   - 作者关系网络
   - 研究领域关联

3. **论文对比**
   - 多篇论文对比分析
   - 差异点提取

4. **导出功能**
   - 导出为 Markdown
   - 导出为 PDF 报告
   - 导出为 Excel

---

## 🎯 优先级总结

### P0（必须实现）
- ✅ AI 论文分析功能
- ✅ PDF 预览功能
- ✅ 论文详情页

### P1（重要功能）
- ✅ 用户偏好设置
- ✅ 收藏和标签系统
- ✅ 论文推荐系统

### P2（增强功能）
- ✅ Elasticsearch 全文检索
- ✅ 协作功能
- ✅ 数据统计

### P3（优化功能）
- ✅ 性能优化
- ✅ 监控和日志
- ✅ 创新功能

---

## 📌 注意事项

1. **AgentScope 配置**
   - 需要配置 API Key
   - 注意 API 调用成本
   - 实现错误处理和重试机制

2. **性能考虑**
   - PDF 分析可能耗时较长
   - 需要异步处理
   - 考虑队列容量和并发控制

3. **用户体验**
   - 分析过程需要明确的进度反馈
   - 失败情况需要友好的错误提示
   - 提供重试机制

4. **数据一致性**
   - 分析结果需要保证数据一致性
   - 考虑失败回滚机制

---

**文档维护**: 建议随着开发进度更新此文档，标记已完成的功能和调整优先级。
